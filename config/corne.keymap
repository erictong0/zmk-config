/*
 * Copyright (c) 2020 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/outputs.h>

#define DEFAULT 0
#define LYR   1
#define MEDIA   2
#define SYM     3
#define NUM     4
#define FUNC    5
#define SPEC   6
#define CTRL    7
#define QWRT   8



/ {
//    macros {
        kp_dash: kp_dash {
            label = "kp_dash";
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings
                = <&macro_press &kp LALT>
                , <&macro_tap &kp KP_N0 &kp KP_N1 &kp KP_N5 &kp KP_N1>
                , <&macro_release &kp LALT>
                ;
        };
        kp_degree: kp_degree {
            label = "kp_degree";
            compatible = "zmk,behavior-macro";
            #binding-cells = <0>;
            bindings
                = <&macro_press &kp LALT>
                , <&macro_tap &kp KP_N0 &kp KP_N1 &kp KP_N7 &kp KP_N6>
                , <&macro_release &kp LALT>
                ;
        };
//    };
//    combos {

//    };

// | 0 |  1  |  2  |  3  |  4  |  5  |   |  6  |  7   |  8  |  9 |  10  | 11 |
// | 12|  13 |  14  |  15  |  16  |  17  |   |  18  |  19   |  20  |  21  |  22  |  23   |
// | 24|  25  |  26  |  27  |  28  |  29  |   |  30  |  31   |  32  |  33  |  34  | 35
//  |36|37|38|   | 39 | 40 | 41 |

    behaviors {
        tdCTRLTAB: Control_Tab {
            compatible = "zmk,behavior-tap-dance";
            label = "Control_Tab";
            #binding-cells = <0>;
            tapping-term-ms = <200>;
            bindings = <&kp LCTRL>, <&kp LA(TAB)>;
        };
        tdCLMK_TAB: Colemak_Tab{
            compatible = "zmk,behavior-tap-dance";
            label = "Colemak_Tab";
            #binding-cells = <0>;
            tapping-term-ms = <200>;
            bindings = <&kp LA(TAB)>, <&to QWRT>;
        };
//        td_mytd: tap_dance_my {
//        compatible = "zmk,behavior-tap-dance";
//          label = "TAP_DANCE_MY;
//          #binding-cells = <0>;
//          tapping-term-ms = <200>;
//          bindings =
//          <&mt LSHFT SPACE>,
//          <&mo 2>;
//      };
    };

    keymap {
            compatible = "zmk,keymap";

            default_layer {
label = "DEF";
// -----------------------------------------------------------------------------------------
// | TAB  |  Q  |  W  |  E  |  R  |  T  |   |  Y  |  U   |  I  |  O  |  P  | LGUI |
// | SHFT |  A  |  S  |  D  |  F  |  G  |   |  H  |  J   |  K  |  L  |  ;  |  SYM   |
// | CRTL |  Z  |  X  |  C  |  V  |  B  |   |  N  |  M   |  ,  |  .  |  /  | NUM  |
//  |to Layer|Space|BSCP|   | ENTER | SPACE | to Layer |
                        bindings = <
   &mo LYR &kp Q &kp W &kp F &kp P &kp B   &kp J &kp L &kp U &kp Y &kp SEMI &mt LCTRL LGUI
   &kp LSHIFT &kp A &kp R &kp S &kp T &kp G   &kp M &kp N &kp E &kp I &kp O &mo SYM
   &mo CTRL &kp Z &kp X &kp C &kp D &kp V   &kp K &kp H &kp COMMA &kp DOT &kp FSLH &mo NUM
      &kp ESC &kp SPACE &kp BSPC   &kp RET &kp SPACE &mo CTRL
                        >;
                };
                layer_layer {
label = "LAYER";
// -----------------------------------------------------------------------------------------
// |     |     |     |     |Ctrl/Shift/Alt keyboard|     |||||     |     |     |     |     |     |
// |     |     |     | SYM | NUM |     |||||     |     |     |     |     |     |
// |     |     |     |     |     |     |||||     |     |     |     |     |CLMK|
//                   |     |     |     |||||     |     |     |
                        bindings = <
 &trans &kp TAB &trans &trans &trans &trans   &kp C_PP &kp C_VOL_DN &kp C_VOL_UP &trans &trans &trans
 &trans &trans &to MEDIA &to SYM &to NUM &trans   &trans &to NUM &to SYM &to MEDIA &trans &trans
 &to CTRL &trans &trans &trans &trans &trans   &trans &trans &trans &trans &trans &to QWRT
                      &to DEFAULT &trans &trans   &trans &trans &to DEFAULT
                        >;
                };

            media_layer {
label = "MEDIA";
// -----------------------------------------------------------------------------------------
// |Clear|     |     |     |     |     |||||     |     |     |     |     |     |
// |Toggle|     |Comment|     |     |     |||||     | Play/Pause | VOL_DN | VOL_UP |Mute|     |
// |     |     |     |     |     |     |||||     | BT1 | BT2 | BT3 | BT4 | BT5 |
//                   |     |     |     |||||     | Play/Pause |     |
                        bindings = <
 &bt BT_CLR &trans &trans &kp UP &trans &trans   &trans &trans &trans &trans &trans &trans
 &out OUT_TOG  &kp LC(LS(8)) &kp LC(LA(M)) &trans &trans &trans   &trans &trans &kp C_VOL_DN &kp C_VOL_UP &trans  &trans
 &trans &trans &kp LC(LS(7)) &trans &trans &trans   &trans &bt BT_SEL 0 &bt BT_SEL 1 &bt BT_SEL 2 &bt BT_SEL 3 &bt BT_SEL 4
                      &to DEFAULT &trans &trans   &trans &kp C_PP &to DEFAULT
                        >;
                };



                sym_layer {
label = "SYMBOL";
// -----------------------------------------------------------------------------------------
// |     |     |     |  {  |  }  |     |||||     |     |     |     |     |     |
// |     |     |  `  |  [  |  ]  |  _  |||||     |     |     |     | ' |     |
// |     |     |     |    |     |     |||||     |     |     |     |     |     |
//                   |     |  (  |  )  |||||     |     |     |
                        bindings = <
 &trans &kp 8 &trans &kp LBRC &kp RBRC &trans       &trans &trans &trans &trans &trans &trans
 &kp LSHIFT &kp 7 &kp GRAVE &kp LBKT &kp RBKT &kp UNDER   &trans &kp UNDER &kp EQUAL &kp PIPE &kp APOS &trans
 &kp LCTRL  &kp LALT &kp M &trans &trans &trans            &trans &trans &trans &trans &trans &trans
                  &to DEFAULT &kp LPAR &kp RPAR            &trans &trans &to DEFAULT
                        >;
                };

                num_layer {
label = "NUM";
// -----------------------------------------------------------------------------------------
// |ESC|  =  |  7  |  8  |  9  |  +  |||||     |     |  &  |  *  |  \  |     |
// |     |  _  |  4  |  5  |  6  |  -  |||||     |     |  $  |  %  |  ^  |ESC|
// |SYM|     |  1  |  2  |  3  |  .  |||||     |     |  !  |  @  |  #  |     |
//                   |     |  0  |     |||||  (  |  )  |     |
                        bindings = <
 &kp ESC &kp EQUAL &kp N7 &kp N8 &kp N9 &kp PLUS   &trans &kp AMPS &kp ASTRK &kp BSLH &trans &trans
 &trans &kp UNDER &kp N4 &kp N5 &kp N6 &kp MINUS   &trans &kp DOLLAR &kp PERCENT &kp CARET &kp PLUS &kp ESC
 &trans &trans &kp N1 &kp N2 &kp N3 &kp DOT   &trans &kp EXCL &kp AT &kp HASH &trans &trans
                      &to DEFAULT &kp N0 &trans   &kp LPAR &kp RPAR &to DEFAULT
                        >;
                };

                func_layer {
label = "FUNC";
// -----------------------------------------------------------------------------------------
// |     |     |     |   |     |     |||||     |     |     |     |     |     |
// |     |     | F5 |     |     |     |||||     |     |     |     |     |     |
// |     |     |     |     |     |     |||||     |     |     |     |     |     |
//                   |     |     |     |||||     |     |     |
                        bindings = <
 &trans &trans &trans &trans &trans &trans   &trans &trans &trans &trans &trans &trans
 &trans &trans &trans &trans &trans &trans   &trans &trans &trans &trans &trans &trans
 &trans &trans &trans &trans &trans &trans   &trans &trans &trans &trans &trans &trans
                      &to DEFAULT &trans &trans   &trans &trans &to DEFAULT
                        >;
                };

                spec_layer {

label = "SPEC";
// -----------------------------------------------------------------------------------------
// |     |Screenshot|Ctrl W|undo?|redo|new tab   |||||Redo |Home     | Up |  End  |     |     |
// |Shift|Select all|Save|left tab|right tab|find|||||     |Ctrl Left|Down|Ctrl Right|     |     |
// |     |Undo|Cut|Copy|Paste|windows paste      |||||     |     |     |     |     |     |
//                               |Esc|     |     |||||     |shift|     |
                        bindings = <
 &trans &kp LG(LS(S)) &kp LC(W) &kp LC(Z) &kp LC(Y) &kp LC(T)   &kp LC(K) &kp HOME &kp UP &kp END &trans &trans
 &kp LSHFT &kp LC(A) &kp LC(S) &kp LC(PG_UP) &kp LC(PG_DN) &kp LC(F)  &trans &kp LC(LEFT) &kp DOWN &kp LC(RIGHT)  &kp LC(RIGHT) &trans
 &trans &kp LC(Z) &kp LC(X) &kp LC(C) &kp LC(V) &kp LG(LC(V))   &kp LC(B) &kp LC(U) &trans &trans &trans &trans
                      &to DEFAULT &trans &trans   &trans &kp LSHFT &to DEFAULT
                        >;
                };

                ctrl_layer {

label = "CTRL";
// -----------------------------------------------------------------------------------------
// |     |Screenshot|Ctrl W|undo?|redo|new tab   |||||Redo |Home     | Up |  End  |     |     |
// |Shift|Select all|Save|left tab|right tab|find|||||     |Ctrl Left|Down|Ctrl Right|     |     |
// |     |Undo|Cut|Copy|Paste|windows paste      |||||     |     |     |     |     |     |
//                               |return|     |     |||||     |shift|     |
                        bindings = <
 &trans &kp LG(LS(S)) &kp LC(W) &kp LC(Z) &kp LC(Y) &kp LC(T)         &kp LC(K) &kp HOME &kp UP &kp END &trans &kp TAB
 &kp LSHFT &kp LC(A) &kp LC(S) &kp LC(PG_UP) &kp LC(PG_DN) &kp LC(F)  &LC(B) &kp LC(LEFT) &kp DOWN &kp LC(RIGHT)  &kp LC(RIGHT) &trans
 &trans &kp LC(Z) &kp LC(X) &kp LC(C) &kp LC(V) &kp LG(V)             &LC(U) &kp LEFT &trans &kp RIGHT &trans &trans
                      &to DEFAULT &kp DEL &kp LC(BSPC)   &kp LC(RET) &kp LSHFT &to DEFAULT
                        >;
                };


                clmk_layer {
label = "QWRT";
// -----------------------------------------------------------------------------------------
// |     |  Q  |  W  |  F  |  P  |  B  |   |  J  |  L  |  U  |  Y  |  ;  |     |
// |     |  A  |  R  |  S  |  T  |  G  |   |  M  |  N  |  E  |  I  |  O  |     |
// |     |  Z  |  X  |  C  |  D  |  V  |   |  K  |  H  |  ,  |  .  |  /  |     |
//                   |     |     |     |   |     |     |     |
                        bindings = <
   &trans &kp Q &kp W &kp E &kp R &kp T   &kp Y &kp U  &kp I     &kp O   &kp P &trans
   &trans &kp A &kp S &kp D &kp F &kp G   &kp H &kp J  &kp K     &kp L   &kp SEMI &trans
   &trans &kp Z &kp X &kp C &kp V &kp B   &kp N &kp M  &kp COMMA &kp DOT &kp FSLH &to DEFAULT
                   &to DEFAULT &trans &trans   &trans &trans &to DEFAULT
                        >;
                };
        };
};

//                nav_layer {
//label = "NAV";
// -----------------------------------------------------------------------------------------
// |     |     |     |     |     |     |||||     | Word left |     |     |     |End|
// |     |     |     |tab left|tab right|     |||||     | Left | Down | Up | Right |Home|
// |     |     |     |     |     |     |||||     | Highlight word left |     |     |     |     |
//                   |     |     |     |||||     |Copy (CTRL(C))|Paste (CTRL(V))|
//                        bindings = <
// &trans &trans &trans &trans &trans &trans          &trans &kp LC(LEFT) &kp LC(DOWN) &kp LC(UP) &kp LC(RIGHT) &kp END
// &trans &trans &trans &kp LC(PG_UP) &kp LC(PG_DN)   &trans   &trans &kp LEFT &kp DOWN &kp UP &kp RIGHT &kp HOME
// &trans &trans &trans &trans &trans &trans          &trans &kp LC(LS(LEFT)) &kp LC(LS(DOWN)) &kp LC(LS(UP)) &kp LC(LS(RIGHT)) &trans
//                      &to DEFAULT &trans &trans          &trans &trans &to DEFAULT
//                        >;
//                };
